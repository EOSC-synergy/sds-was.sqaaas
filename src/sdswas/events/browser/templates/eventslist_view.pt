<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      i18n:domain="sdswas.events">
<body>

<metal:javascriptslot fill-slot="javascript_head_slot">
    <script type="text/javascript" tal:define="navroot context/@@plone_portal_state/navigation_root_url"
            tal:attributes="src string:${navroot}/++resource++sdswas.events/js/events.js?bust=v1"/>
</metal:javascriptslot>

<metal:main fill-slot="main">

    <!-- Banner top -->
    <section class="banner-top bg-color-white">
        <div class="banner-top-wrap main-wrap main-padding">
            <div class="banner-top-container main-container">
                <div class="page-title"><h1>Upcoming Events</h1></div>
            </div>
        </div>
    </section>

    <!-- Banner top ends -->

    <!-- Upcoming events-->
    <section class="events-upco-cards bg-color-white"
            tal:define="items python:view.upcoming_events()">

        <!-- Upcoming events wrap -->
        <div class="main-wrap main-padding main-padding-tb">

            <div id="upcoming-events" class="events-upco-cards-container main-container">

                <tal:row tal:repeat="item items">
                    <!-- Events upco card -->
                    <div class="events-upco-card"
                            tal:define="small_info python:item['event_start_date'];
                                        url python:item['absolute_url'];
                                        title python:item['title'];
                                        event_type python:item['event_type'];"
                            tal:attributes="data-gobacklink string:< BACK TO UPCOMING EVENTS;
                                            data-page-url url;
                                            data-url string:${url}/${event_type}_modal;
                                            data-title title;">

                        <!-- Card thumb -->
                        <a class="events-upco-card-thumb js-card-trigger" href="#" target="_self">

                        <img tal:attributes="src string:${url}/@@images/image/grid-teaser;
                                                alt title;
                                                width string:380px;
                                                height string:206px" />


                        </a><!-- Card thumb ends -->

                        <!-- Card content -->
                        <div class="events-upco-card-content">

                            <div class="events-upco-card-subtitle">
                                <h4 tal:content="small_info"></h4>
                            </div>

                            <div class="events-upco-card-small-info">
                                <p tal:content="python:item['location']"></p>
                            </div>

                            <a class="events-upco-card-title js-card-trigger">
                                <h3 tal:content="python:item['title']"/>
                            </a>

                            <a class="events-upco-text-link js-card-trigger">
                                <p>Read more</p>
                            </a>
                        </div><!-- Card content ends -->
                    </div><!-- Events upco card ends -->
                </tal:row>

            </div><!-- Upcoming events container ends -->

        </div><!-- Upcoming events wrap carpet ends -->

        <!-- This loader is not used because the cards of this container are not fetched using ajax -->
        <!--<div id="loader-upco-cards" class="loader bg-color-white hide">
            <div tal:replace="structure context/loader"/>
        </div>--> <!--Loader widget ends -->

        <!-- No results section -->
        <div tal:condition="python:not items" class="main-padding">
            <section class="no-results-section bg-white">
                <div metal:use-macro="context/events_utils/macros/no_results_section"/>
            </section>
        </div><!-- No results section -->

    </section><!-- Upcoming events carpet ends -->

    <!-- Past events header -->
    <section class="events-pastev-header bg-color-grey-light">
       <a id="past"/>
       <!-- Past events header wrap -->
        <div class="pastev-header-wrap main-wrap main-padding main-padding-tb">
          <!-- Past events header container -->
          <div class="pastev-header-container main-container">
            <div class="pastev-header">

                <h2 class="pastev-desc-text">Past Events</h2>
                <p class="pastev-desc-text">
                You can find and explore all the resources from our past events in the Resources tab in the menu, or
                you can search directly in the following boxes.
                </p>

                <!-- Past events toolbar -->
                <div class="pastev-toolbar">

                    <!-- Past events cta -->
                    <a class="pastev-cta" target="_self"
                        tal:attributes="href python:view.resources_page_url()">
                        <p>Go to resources</p>
                    </a>
                    <!-- Past events cta ends -->

                    <!-- Past events seach tool -->
                    <div id="pastev-search-tool" class="search-tool-container">
                        <form id="searchPastev">
                        <input class="search-tool-input" type="text" placeholder="Search..." name="search" autocomplete="off">
                        <span class="search-icon icon-search"></span>
                        </form>
                    </div><!-- Past events seach tool ends -->

                </div><!-- Past events toolbar ends -->

            </div><!-- Past events header ends -->
            </div><!-- Past events header container ends -->
        </div><!-- Past events header wrap ends -->
    </section><!-- Past events header ends -->

    <!-- Past events contents-->
    <section class="events-pastev-cards section-with-min-height bg-color-grey-light">

        <!-- Past events wrap -->
        <div class="pastev-cards-wrap main-wrap main-padding">

            <!-- Past events container -->
            <div class="pastev-container main-container"
                    tal:attributes="data-url python:view.pastevents_url();">

                <!-- Past events cards container -->
                <div class="pastev-cards-container"/>
                <!-- Past events cards container -->
            </div><!-- Past events container ends -->

        </div><!-- Past events wrap ends -->

        <!-- Loader widget -->
        <div id="loader-pastev-cards" class="loader bg-color-grey-light hide">
            <div tal:replace="structure context/loader"/>
        </div><!-- Loader widget ends -->

    </section><!-- Past events contents ends -->

    <!-- Homepage subscribe form section -->
    <section class="subscribe-widget bg-color-grey-light">
       <div metal:use-macro="context/subscribeform/macros/banner" />
    </section>
    <!-- Homepage subscribe form section ends-->

    <section class="news-spacer"></section>

</metal:main>
</body>
</html>