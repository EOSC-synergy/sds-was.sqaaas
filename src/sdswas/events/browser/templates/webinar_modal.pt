<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      i18n:domain="sdswas.events">

<metal:row define-macro="main-content" i18n:domain="sdswas.events"
    tal:define="register_url context/register_url;
                is_upcoming python:view.is_upcoming();
                has_image nocall:context/image;
                has_video nocall:context/embedded_url">

    <!-- Modal window title -->
    <div tal:replace="structure context/modwin_page_title"/>
    <!-- Modal window title ends-->

    <!-- Modal window image -->
    <section class="modwin-image-section"  tal:condition="python:has_image and not(has_video)">
      <div class="modwin-image-wrap modwin-padding">
        <div class="modwin-image-container">
          <div class="modwin-image ">
            <!-- Modal window hero image -->
            <div tal:replace="structure context/modwin_hero_image"/>
            <!-- Modal window hero image ends-->
        </div>
        </div>
      </div>
    </section><!-- Modal window image ends -->

    <!-- Modal window video -->
    <section class="modwin-image-section" tal:condition="has_video">
        <div class="modwin-image-wrap modwin-padding">
            <div class="modwin-image-container">
                <div tal:condition="context/embedded_url"
                    class="col-md-16 embed-responsive embed-responsive-16by9">
                    <iframe class="embed-responsive-item"
                        tal:attributes="src python:view.embedded_url();
                                        allowfullscreen True"/>
                </div>
            </div>
        </div>
    </section><!-- Modal window text ends -->

    <!-- Modal window text -->
    <section class="modwin-text-section">
        <div class="modwin-text-wrap modwin-padding">
            <div class="modwin-text-container">
                <div class="modwin-text">
                    <h2>Summary</h2>
                    <p tal:content="structure context/full_description/raw" />
                </div>
            </div>

            <div class="modwin-text-cta" tal:condition="is_upcoming">
                <!-- Add to calendar button -->
                <a id="add-calendar" class="modwin-cta-within-text" target="_blank"
                    title="Download this event in iCal format"
                    tal:define="here_url context/@@plone_context_state/object_url"
                    tal:attributes="href string:$here_url/ics_view">
                <p>Add to calendar</p>
                </a>

                <!-- Register button -->
                <a tal:condition="nocall:register_url" class="modwin-cta-within-text"
                    tal:attributes="href register_url" target="_blank">
                    <p>Register</p>
                </a>
            </div>
        </div>
    </section><!-- Modal window text ends -->

    <!-- Modal window sidepanel section -->
    <section class="modwin-sidepanel-section">
        <div class="modwin-sidepanel-wrap modwin-padding">
            <div class="modwin-sidepanel-container">

                <!-- Modal window sidepanel -->
                <div class="modwin-sidepanel">

                    <!-- Sidepanel info card -->
                    <div class="sidepanel-info-card">
                        <div class="info-card-content">

                            <h3 tal:content="view/start">-</h3>

                            <div class="info-card-small-info"
                                tal:condition="context/location" >
                                <p tal:content="structure view/w/IEventLocation.location/render">-</p>
                            </div>

                            <div class="info-card-data">
                                <p class="text-bold">Presented by</p>
                                <p tal:content="structure view/w/presented_by/render"/>
                            </div>

                            <!-- Info card subcontent -->
                            <div class="info-card-subcontent">

                                <div class="info-card-data">
                                    <p class="text-bold">Event type</p>
                                    <p>Webinar</p>
                                </div>

                                <div class="info-card-data">
                                    <p class="text-bold">Time</p>
                                    <p tal:content="view/time">-</p>
                                </div>

                                <div class="info-card-data">
                                    <p class="text-bold">Language</p>
                                    <p tal:content="view/language">-</p>
                                </div>

                                <div class="info-card-data">
                                    <p class="text-bold">Duration</p>
                                    <p tal:content="view/duration" >-</p>
                                </div>

                            </div><!-- Info card subcontent ends  -->

                        </div><!-- Info card content ends  -->

                    </div><!-- Sidepanel info card ends -->

                    <div class="sidepanel-cta-component"
                        tal:define="picture nocall:context/document;"
                        tal:condition="nocall:picture">
                        <div tal:define="title string:Presentation"
                                metal:use-macro="context/resources_utils/macros/filedownload"/>
                    </div>  <!-- Sidepanel cta component ends -->


                    <!-- Sidepanel share component -->
                    <div class="sidepanel-share-component">
                        <tal metal:use-macro="context/share_social_networks/macros/sidepanel"/>
                    </div><!-- Sidepanel share component ends-->

                </div>
                <!-- Modal window sidepanel ends -->

            </div>
        </div>
    </section>

  </metal:row>
</html>