<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      i18n:domain="sdswas.events">


<metal:row define-macro="main-content" i18n:domain="sdswas.events"
        tal:define = "has_images view/has_images;
                    numPresentations python:view.numPresentations();
                    hasPresentations python: numPresentations > 0;
                    agenda context/document;
                    register_url context/register_url;
                    is_upcoming python:view.is_upcoming();">

    <!-- Modal window title -->
    <div tal:replace="structure context/modwin_page_title"/>
    <!-- Modal window title ends-->

    <!-- Modal window image -->
    <section class="modwin-image-section"  tal:condition="context/image">
    <div class="modwin-image-wrap">
        <div class="modwin-image-container">
        <div class="modwin-image ">
            <!-- Modal window hero image -->
            <div tal:replace="structure context/modwin_hero_image"/>
            <!-- Modal window hero image ends-->
        </div>
        </div>
    </div>
    </section><!-- Modal window image ends -->

    <!-- Modal window text -->
    <section class="modwin-text-section">

        <div class="modwin-text-wrap modwin-padding">

            <!-- Menu -->
            <div metal:use-macro="context/events_utils/macros/generic_event_menu"/>
            <!-- Menu ends -->

            <div class="modwin-text-container">
                <div class="modwin-text">
                    <h2>Summary</h2>
                    <p tal:content="structure context/full_description/raw" />
                </div>

                <div class="modwin-text-cta" tal:condition="is_upcoming">
                    <!-- Add to calendar button -->
                    <a id="add-calendar" class="modwin-cta-within-text" target="_blank"
                        title="Download this event in iCal format"
                        tal:define="here_url context/@@plone_context_state/object_url"
                        tal:attributes="href string:$here_url/ics_view">
                    <p>Add to calendar</p>
                    </a>

                    <!-- Register button -->
                    <a tal:condition="nocall:register_url" class="modwin-cta-within-text"
                        tal:attributes="href register_url" target="_blank">
                        <p>Register</p>
                    </a>
                </div>
            </div>
        </div>

    </section><!-- Modal window text ends -->

    <!-- Modal window sidepanel section -->
    <section class="modwin-sidepanel-section">
        <div class="modwin-sidepanel-wrap modwin-padding">
            <div class="modwin-sidepanel-container">

            <!-- Modal window sidepanel -->
            <div class="modwin-sidepanel">

                <!-- Sidepanel info card -->
                <div class="sidepanel-info-card">
                    <div class="info-card-content">

                        <h3 tal:content="view/start">-</h3>

                        <div class="info-card-small-info"
                            tal:condition="context/location" >
                            <p tal:content="structure view/w/IEventLocation.location/render">-</p>
                        </div>

                        <div class="info-card-data" tal:condition="context/venue">
                            <p class="text-bold">Venue</p>
                            <p tal:content="structure view/w/venue/render">-</p>
                        </div>

                        <div class="info-card-data"
                            tal:condition="context/organized_by">
                            <p class="text-bold">Organized by</p>
                            <p tal:content="structure view/w/organized_by/render"/>
                        </div>

                        <!-- Info card subcontent -->
                        <div class="info-card-subcontent">

                            <div class="info-card-data">
                                <p class="text-bold">Event type</p>
                                <p tal:content="structure view/w/event_type/render">-</p>
                            </div>

                            <div class="info-card-data">
                                <p class="text-bold">Time</p>
                                <p tal:content="view/time">-</p>
                            </div>

                            <div class="info-card-data">
                                <p class="text-bold">Language</p>
                                <p tal:content="view/language">-</p>
                            </div>

                            <div class="info-card-data">
                                <p class="text-bold">Duration</p>
                                <p tal:content="view/duration" >-</p>
                            </div>

                        </div><!-- Info card subcontent ends  -->

                        <a class="info-card-data link-break-text" target="_blank"
                                tal:attributes="href context/website_url">
                            <p class="text-bold" tal:content="context/website_url">-</p>
                        </a>

                    </div><!-- Info card content ends  -->

                </div><!-- Sidepanel info card ends -->

                <!-- Sidepanel cta component -->
                <div id="agenda" class="sidepanel-cta-component"
                    tal:condition="nocall:agenda">
                        <div tal:define="title string:Agenda"
                            metal:use-macro="context/events_utils/macros/filedownload"/>
                </div>  <!-- Sidepanel cta component ends -->

                 <!-- Sidepanel share component -->
                <div class="sidepanel-share-component">
                    <tal metal:use-macro="context/share_social_networks/macros/sidepanel"/>
                </div><!-- Sidepanel share component ends-->

            </div>
            <!-- Modal window sidepanel ends -->

            </div>
        </div>
    </section>


    <!-- Modal window image slider -->
    <section id="images" class="modwin-img-slider-section" tal:condition="has_images">
        <div class="modwin-img-slider-wrap modwin-padding">
            <div class="modwin-img-slider-container section-with-min-height " >
                <div class="modwin-img-slider-title">
                    <h2>Images</h2>
                </div>

                <!-- Slider component -->
                <div id="modwin-img-slider" class="slider section-with-min-height ">

                    <div id="slider-items-contents"
                        tal:attributes="data-url string:${context/absolute_url}/images_slider">
                    </div>

                    <!-- Loader widget -->
                    <div id="loader-images" class="loader bg-color-grey-light">
                        <div tal:replace="structure context/loader"/>
                    </div>
                    <!-- Loader widget ends-->

                </div><!-- Slider component ends -->


            </div>
        </div>


    </section>
    <!-- Modal window image slider ends -->

    <!--Presentations section header-->
    <section class="modwin-cards-header-section" tal:condition="python: numPresentations > 0">
        <div class="modwin-cards-header-wrap modwin-padding-lr">
            <div class="modwin-cards-header-container">
                <div class="modwin-cards-header">
                    <h2>Presentations</h2>

                    <div class="modwin-cards-header-toolbar">
                        <!-- Search tool -->
                        <div id="modwin-cards-search-tool" class="search-tool-container">
                            <form id="searchPresentations">
                            <input class="search-tool-input" type="text" placeholder="Search..." name="search" autocomplete="off">
                            <span class="search-icon icon-search"></span>
                            </form>
                        </div><!-- Search tool ends -->

                        <a  id="download-all-cta" tal:condition="hasPresentations"
                            class="outlined-cta" target="_self"
                            tal:attributes="href view/presentations_zip_link">
                            <p>Download all</p>
                            <i class="icon-download"></i>
                        </a>
                    </div>

                </div> <!--Presentations section header ends-->
            </div>
        </div>
    </section><!--Presentations section contents-->

    <section id="presentations"
            tal:condition="python: numPresentations > 0"
            class="modwin-cards-section section-with-min-height">

        <div class="modwin-cards-wrap modwin-padding">
            <div class="modwin-cards-container card-with-embedded-doc">

                <!-- Modular window cards -->
                <div class="modwin-cards"
                        tal:attributes="data-url string:${context/absolute_url}/presentations_list">
                </div>

            </div>
        </div>

        <!-- Loader widget -->
        <div id="loader-presentation-cards" class="loader bg-color-white hide">
            <div tal:replace="structure context/loader"/>
        </div>
        <!-- Loader widget ends-->

    </section>
    <!--Presentations section contents ends-->

  </metal:row>
</html>